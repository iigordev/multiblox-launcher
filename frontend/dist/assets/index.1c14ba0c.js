(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function o(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerpolicy&&(s.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?s.credentials="include":t.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(t){if(t.ep)return;t.ep=!0;const s=o(t);fetch(t.href,s)}})();function m(e,n){return window.go.main.App.CreateNewInstance(e,n)}function w(e){return window.go.main.App.DeleteInstance(e)}function p(){return window.go.main.App.GetInstances()}function f(e){return window.go.main.App.Launch(e)}function g(e){return window.go.main.App.RepairInstance(e)}function h(e){return window.go.main.App.StopInstance(e)}function I(e,n,o){return window.go.main.App.UpdateInstance(e,n,o)}window.addEventListener("contextmenu",e=>{if(!e.target.closest(".card"))return e.preventDefault(),!1;e.preventDefault()},!0);window.addEventListener("keydown",e=>{const n=e.metaKey||e.ctrlKey,o=e.key.toLowerCase();(n&&o==="r"||n&&e.altKey&&o==="i"||o==="f5"||n&&e.shiftKey&&o==="r")&&e.preventDefault()});let c="Icon1",d={name:"",icon:"",isMain:!1};document.addEventListener("DOMContentLoaded",()=>{window.updateGrid(),document.addEventListener("click",()=>{const o=document.getElementById("context-menu");o&&o.classList.add("hidden")});const e=document.getElementById("menu-delete");e&&(e.onclick=o=>{o.preventDefault(),o.stopPropagation(),document.getElementById("delete-instance-name").innerText=d.name,window.showModal("delete-modal"),document.getElementById("context-menu").classList.add("hidden")});const n=document.getElementById("menu-edit");n&&(n.onclick=o=>{o.preventDefault(),o.stopPropagation(),document.getElementById("edit-instance-name").value=d.name,window.showModal("edit-modal"),document.getElementById("context-menu").classList.add("hidden")})});window.updateGrid=function(){p().then(e=>{const n=document.getElementById("instance-grid");if(!n)return;n.innerHTML=`
            <div class="card create-new" onclick="window.showModal('create-modal')">
                <img src="/assets/images/instanceUIButtons/AddInstance.png" class="add-icon-img" alt="Add">
                <span class="name">Create New Instance</span>
            </div>
        `;const o=(e==null?void 0:e.find(t=>t.name==="Roblox"))||{name:"Roblox",path:"/Applications/Roblox.app",status:"Operational",iconFolder:"Icon1"},i=e?[...e]:[];e!=null&&e.some(t=>t.name==="Roblox")||i.unshift(o),i.forEach(t=>{const s=t.name==="Roblox"||t.path==="/Applications/Roblox.app";let a=t.status||"Operational";a==="Open"&&(a="Running"),a==="UpdateRequired"&&(a="Broken (please repair)");const r=a==="Running"||a==="Operational"?"operational":"issue",l=t.iconFolder||"Icon1",u=`/assets/images/instanceIcons/${l}.png`;n.innerHTML+=`
                <div class="card" 
                     data-is-main="${s}" 
                     oncontextmenu="window.showContextMenu(event, '${t.name}', '${l}', ${s})">
                    <img src="${u}" class="app-icon" onerror="this.src='/assets/images/appIcon/AppIcon.png'">
                    <div class="name">${t.name}</div>
                    <div class="status ${r}">${a}</div>
                    
                    <div class="card-actions">
                        <img src="/assets/images/instanceUIButtons/Play.png" class="action-btn-img" onclick="window.LaunchInstance('${t.name}')">
                        ${s?"":`<img src="/assets/images/instanceUIButtons/Repair.png" class="action-btn-img" onclick="window.RepairInstance('${t.name}')">`}
                        <img src="/assets/images/instanceUIButtons/Quit.png" class="action-btn-img" onclick="window.StopInstance('${t.name}')">
                    </div>
                </div>
            `})}).catch(e=>console.error("Could not load instances:",e))};window.showModal=function(e){const n=document.getElementById("overlay");n&&n.classList.remove("hidden"),document.querySelectorAll(".modal").forEach(i=>i.classList.add("hidden"));const o=document.getElementById(e);o&&(o.classList.remove("hidden"),e==="create-modal"&&(c="Icon1",document.querySelectorAll(".icon-opt").forEach(i=>{var t;i.classList.remove("selected"),(t=i.getAttribute("onclick"))!=null&&t.includes("Icon1")&&i.classList.add("selected")})))};window.closeModals=function(){const e=document.getElementById("overlay");e&&e.classList.add("hidden"),document.querySelectorAll(".modal").forEach(n=>n.classList.add("hidden"))};window.handleCreate=function(){const e=document.getElementById("instance-name"),n=e.value.trim();!n||(window.showNotification(`Creating ${n}...`),console.log("SENDING TO BACKEND:",n,c),m(n,c).then(()=>{setTimeout(()=>{e.value="",window.closeModals(),window.updateGrid(),window.showNotification(`Created new "${n}" successfully!`)},1200)}))};window.selectIcon=function(e,n){c=e.charAt(0).toUpperCase()+e.slice(1),console.log("UI SELECTED:",c),document.querySelectorAll(".icon-opt").forEach(i=>i.classList.remove("selected")),n.classList.add("selected")};window.handleDelete=function(){const e=d.name;w(e).then(()=>{window.closeModals(),window.updateGrid(),window.showNotification(`Deleted "${e}" successfully!`)})};window.handleEditSave=function(){const n=document.getElementById("edit-instance-name").value.trim();if(!n){window.closeModals();return}I(d.name,n,d.icon).then(()=>{window.closeModals(),window.updateGrid()}).catch(o=>console.error("Update failed:",o))};window.LaunchInstance=e=>f(e);window.RepairInstance=e=>{g(e).then(()=>{window.showNotification(`Repaired "${e}" successfully!`)})};window.StopInstance=e=>h(e);window.showContextMenu=function(e,n,o,i){if(i)return;e.preventDefault(),d={name:n,icon:o,isMain:i};const t=document.getElementById("context-menu");t&&(t.style.top=`${e.clientY}px`,t.style.left=`${e.clientX}px`,t.classList.remove("hidden"))};window.selectIcon=function(e,n){c=e,document.querySelectorAll(".icon-opt").forEach(o=>o.classList.remove("selected")),n.classList.add("selected")};window.switchTab=function(e,n){document.querySelectorAll(".nav-item").forEach(i=>i.classList.remove("active")),n.classList.add("active"),document.querySelectorAll(".view").forEach(i=>i.classList.add("hidden"));const o=document.getElementById(`view-${e}`);o&&o.classList.remove("hidden"),window.closeModals()};window.showNotification=function(e){const n=document.getElementById("notification-toast");!n||(n.innerHTML=`<span>\u2705</span> ${e}`,n.classList.remove("hidden"),setTimeout(()=>n.classList.add("show"),10),setTimeout(()=>{n.classList.remove("show"),setTimeout(()=>n.classList.add("hidden"),100)},2e3))};window.updateTheme=function(e){const n=document.body;e==="light"?(n.classList.add("light-mode"),n.classList.remove("dark-mode")):n.classList.remove("light-mode"),window.showNotification(`Switched to ${e.charAt(0).toUpperCase()+e.slice(1)} Mode`)};window.BrowserOpenURL=function(e){window.go.main.App.OpenBrowser(e)};
